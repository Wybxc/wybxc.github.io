---
import { getCollection, render } from "astro:content";
import type { GetStaticPaths, InferGetStaticPropsType } from "astro";
import DefaultLayout from "../layouts/DefaultLayout.astro";

export const getStaticPaths = (async () => {
    const collection = await getCollection(
        "blog",
        (post) => post.id !== "index",
    );
    return collection.map((post) => ({
        params: { slug: post.id },
        props: post,
    }));
}) satisfies GetStaticPaths;
type Props = InferGetStaticPropsType<typeof getStaticPaths>;

const post = Astro.props;
const title = post.data.title;
const { Content } = await render(post);
---

<DefaultLayout title={title}>
    <Content />
</DefaultLayout>
